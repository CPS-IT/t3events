{namespace ts=Webfox\T3events\ViewHelpers}

<f:layout name="Default" />

This Template is responsible for creating a quick menu (selectbox).

<f:section name="main">
	<f:if condition="{settings.debug.settings}">
		<f:debug title="settings (QuickMenu)">{settings}</f:debug>
	</f:if>
	<f:if condition="{settings.debug.quickMenu.entries}">
		<f:debug title="genres">{genres}</f:debug>
		<f:debug title="venues">{venues}</f:debug>
	</f:if>
	<f:if condition="{settings.debug.quickMenu.demand}">
		<f:debug title="overwriteDemand">{overwriteDemand}</f:debug>
	</f:if>
	<f:flashMessages />

	<div class="quickMenu">
		<div class="text">
			<f:translate key="tx_t3events.searchAllEventsByGenre.hint" />
		</div>
		<div class="selectbox">
			<f:form name="overwriteDemand" action="list"
				pageUid="{settings.event.list.pid}">
				<f:if condition="{settings.showRadiusSearch}">
					<label for="tx-t3events-search-location">{f:translate(key:'tx_t3events.proximity-search')}</label>
					<f:form.textfield
						id="tx-t3events-search-location"
						name="overwriteDemand[search][location]"
						value="{overwriteDemand.search.location}"
						class="search"
						placeholder="{f:translate(key: 'tx_t3events.mapFilter.placeholder.location')}"
						/>
					<f:form.select
						id="tx-t3events-search-radius"
						name="overwriteDemand[search][radius]"
						value="{overwriteDemand.search.radius}"
						options="{50000: '50 km', 100000: '100 km', 250000: '250 km', 500000: '500 km', 1000000: '1000 km'}"
						/>
				</f:if>
				<f:comment>show search field</f:comment>
				<f:if condition="{settings.showSearchField}">
					<label for="tx-t3events-search-input">{f:translate(key: 'tx_t3events.extendedSearchForm.searchTerm')}</label>
					<f:form.textfield
						id="tx-t3events-search-input"
						name="overwriteDemand[search][subject]"
						value="{overwriteDemand.search.subject}"
						class="search"
						placeholder="{f:translate(key: 'tx_t3events.extendedSearchForm.placeholder.searchTerm')}"
						/>
				</f:if>

				<f:comment>show genres only</f:comment>
				<f:if condition="{0: settings.quickMenuType}=={0: 'genres'}">
					<f:form.select 
						id="tx_t3eventsQuickMenue"
						name="overwriteDemand[genre]" 
						options="{genres}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allGenres')}"
						value="{overwriteDemand.genre}"
					/>
				</f:if>
				
				<f:comment>show venues only</f:comment>
				<f:if condition="{0:settings.quickMenuType}=={0: 'venues'}"> 
					<f:form.select 
					  id="tx_t3eventsQuickMenue"
						name="overwriteDemand[venue]" 
						options="{venues}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allVenues')}"
						value="{overwriteDemand.venue}"
					/>
				</f:if>
				
				<f:comment>show event types only</f:comment>
				<f:if condition="{0:settings.quickMenuType}=={0: 'eventTypes'}"> 
					<f:form.select 
					  id="tx_t3eventsQuickMenue"
						name="overwriteDemand[eventType]" 
						options="{eventTypes}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allEventTypes')}"
						value="{overwriteDemand.eventType}"
					/>
				</f:if>
				
				<f:comment>show genres, venues and event types</f:comment>
				<f:if condition="{0:settings.quickMenuType}=={0: ''}">
					<f:form.select 
						id="tx_t3eventsQuickMenue"
						name="overwriteDemand[genre]" 
						options="{genres}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allGenres')}"
						value="{overwriteDemand.genre}"
					/>
					<f:form.select 
					  id="tx_t3eventsQuickMenue"
						name="overwriteDemand[venue]" 
						options="{venues}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allVenues')}"
						value="{overwriteDemand.venue}"
					/>
					<f:form.select 
					  id="tx_t3eventsQuickMenue"
						name="overwriteDemand[eventType]" 
						options="{eventTypes}"
						optionValueField="uid" 
						optionLabelField="title"
						prependOptionLabel="{f:translate(key: 'tx_t3events.allEventTypes')}"
						value="{overwriteDemand.eventType}"
					/>
					<f:form.hidden 
					  id="tx_t3eventsQuickMenue"
					  	name="overwriteDemand[categoryConjunction]"
					  	value="{settings.categoryConjunction}"
					/>

					
				</f:if>
				<f:form.submit 
				  id="tx_t3eventsQuickMenueSubmit"
					name="submit" 
					value="{f:translate(key: 'tx_t3events.button.label.search', default: 'Suchen')}"
				/>
			</f:form>
		</div>
	</div>
</f:section>
